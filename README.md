# simple_simulator

本シミュレータはJavaを利用しています. 

## 入力ファイルの仕様

各行にはデータを1つだけ記述することができます.

それぞれのデータは, 以下のいずれかの方法で書くことができます.

- 数値を(10進法で)直接記述する. 値は16bitの範囲内とする.
- SIMPLEの命令形式に従って記述する. このときアルファベットは大文字でも小文字でもよい.

例えば `0` , `-32768`, `Add 3,1`, `HLT`などがデータとして認識される文字列です.
`32768`, `0b1100110010101010`, `halt`などは不適切なデータとして無視されます.

また, `//`から行末まではコメントとみなされます. 例えば`Add 0, 1// r[0] += r[1];`のように書くことができます.

## 出力の読み方

標準出力には, 以下の情報が出力されます.
- 入力命令`IN`が読み込まれたとき, 入力を促す文字列 `Input? : `. これが表示された場合, 利用者は入力とする値を(10進法で)標準入力に与える.
- 出力命令`OUT`が読み込まれたとき, その命令の行番号および出力内容`Output on X : Y`. PCが`X`の出力命令の出力内容が`Y`であったことを表す. `X`および`Y`はともに10進法で表現される.

デバッグモード(後述)が有効のとき, 標準エラー出力には以下の情報が表示されます.
- 実行した命令の行番号と内容.
- 命令を実行した直後のレジスタおよび条件コードの状態. まずレジスタの状態が配列として与えられ, 次に条件コードが`S`,`Z`,`C`,`V`の順で与えられる. 例えば`[0,0,0,3,0,0,0,0],(0010)`は`r[4]`の値が`3`であり条件コード`carry`が`1`であるような状態を表す.

## 実行時オプション

- `-d` : デバッグモード. 1命令実行するごとに状態を表示します.
- `-m` :入力に対応する`.mif`ファイルを生成します. ファイル名は`output.mif`となっています.
- `(存在するファイル名)` 入力とするファイルを選択できます. 指定がない場合は同梱の`sample.txt`を入力に用います.